<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The imaginary map</title>

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: Arial, Helvetica, sans-serif;
        }

        html, body {
            height: 100%;
            width: 100%;
        }

        .container {
            display: flex;
            height: 100vh;
            width: 100vw;
        }

        .sidebar {
            width: 300px;
            background-color: #2a2a2a;
            color: #fff;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .sidebar h1 {
            font-size: 28px;
            color: #BAB700;
            margin-bottom: 0px;
            text-align: center;
        }

        .sidebar h2 {
            font-size: 14px;
            font-weight: normal;
            margin-bottom: 5px;
            margin-top: 0px;
            line-height: 1.1;
            color: #ccc;
            text-align: center;
        }

        /* --- BOTTONI SIDEBAR --- */
        .sidebar button,
        .sidebar .dropdown-btn {
            width: 100%;                
            padding: 11px;
            font-size: 11px;
            border: none;
            cursor: pointer;
            border-radius: 6px;
            background-color: #d3d3d3;
            color: #2a2a2a;
            transition: background-color 0.2s, color 0.2s;

            display: flex;
            flex-direction: column;
            justify-content: center;    /* verticale */
            align-items: center;        /* orizzontale */
            text-align: center;         /* assicura centratura del testo */
        }

        /* Nascondi testo esteso di default */
        .sidebar button br,
        .sidebar button span.extended,
        .sidebar .dropdown-btn br,
        .sidebar .dropdown-btn span.extended {
            display: none;
        }

        /* Mostra testo esteso al passaggio del mouse o se il bottone Ã¨ attivo */
        .sidebar button:hover br,
        .sidebar button:hover span.extended,
        .sidebar button.active br,
        .sidebar button.active span.extended,
        .sidebar .dropdown-btn:hover br,
        .sidebar .dropdown-btn:hover span.extended,
        .sidebar .dropdown-btn.active br,
        .sidebar .dropdown-btn.active span.extended {
            display: block;
        }

        /* Cambia colore al passaggio del mouse */
        .sidebar button:hover,
        .sidebar .dropdown-btn:hover {
            background-color: #bababa;
        }

        /* Bottone attivo */
        .sidebar button.active,
        .sidebar .dropdown-btn.active {
            background-color: #BAB700;
            color: #2a2a2a;
            font-weight: bold;
        }

        /* Dropdown container */
        .dropdown {
            position: relative;
        }

        /* Dropdown content */
        .dropdown-content {
            display: none;
            flex-direction: column;
            gap: 6px;
            margin-top: 6px;
        }

        .dropdown.open .dropdown-content {
            display: flex;
        }


        .map-container {
            flex: 1;
            background-color: #f0f0f0;
            position: relative;
            overflow: hidden;
        }

        .map-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        #loading {
            position: absolute;
            z-index: 9999;
            background: rgba(255,255,255,0.85);
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            pointer-events: none;
        }

        .hourglass {
            width: 40px;
            height: 40px;
            border: 4px solid #555;
            border-color: #555 transparent #555 transparent;
            border-radius: 50%;
            animation: spin 1.2s linear infinite;
        }

        .legend {
            display: none;
            margin-top: 8px;
            padding: 10px;
            font-size: 12px;
            background-color: #3a3a3a;
            border-left: 3px solid #BAB700;
            line-height: 1.4;
        }

        .legend a {
            color: #BAB700;
            text-decoration: none;
            font-weight: bold;
        }

        .legend a:hover {
            text-decoration: underline;
            color: #ffffff;
        }

        .loading-text {
            margin-top: 12px;
            font-size: 14px;
            color: #555;
            letter-spacing: 0.4px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* --- CARTOGRAPHY MODAL --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            width: 600px;
            max-width: 90%;
            border-radius: 8px;
            padding: 20px;
            position: relative;
            animation: fadeIn 0.3s ease;
        }

        .modal-content img {
            width: 100%;
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .close-modal {
            position: absolute;
            top: 10px;
            right: 14px;
            font-size: 20px;
            cursor: pointer;
            color: #666;
        }

        .close-modal:hover {
            color: black;
        }

        .map-container iframe.slider-map {
            top: -27px;
            height: calc(100% + 30px);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            .sidebar {
                width: 100%;
                flex-direction: row;
                overflow-x: auto;
            }
            .map-container {
                height: 70vh;
            }
        }

        #aboutText {
            position: absolute;       
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;             
            display: none;            
            font-family: 'Times New Roman', Times, serif;
            line-height: 1.6;
            color: #fff;
            text-align: center;

            background-image: url('https://s3-eu-west-1.amazonaws.com/static.comunitatrentina.it/var/trentoarchiviobiblioteca/storage/images/media/immagini-iconografie/ti1e044.jpg/496942-1-ita-IT/TI1e044.jpg.jpg');
            background-size: 131% auto;          
            background-position: center -220px;
            background-repeat: no-repeat;
            background-attachment: scroll;

            display: flex;                    
            flex-direction: column;
            justify-content: center;      
            align-items: center;          
            
            /* Sovrapposizione trasparente per leggibilitÃ  */
            box-shadow: inset 0 0 0 1000px rgba(50, 50, 50, 0.6);
            padding: 40px;
        }

    </style>
</head>

<body>
<div class="container">

    <div class="sidebar">
        <h1>The imaginary map</h1>
        <h2>Experience Trentoâ€™s history through interactive maps</h2>

        <button id="aboutBtn">
            <strong>About the project</strong><br>
            <span class="extended">Learn more about the context and purpose of this project.</span>
        </button>
        
        <button id="publicWorksBtn" data-file="public_works_maps/map.html">
            <strong>Public works</strong><br>
            <span class="extended">Explore the public works carried out in the city of Trento during the 19th century.</span>
        </button>

       <div id="publicWorksLegend" class="legend">

            <p><strong>ADTn:</strong> 
                <a href="https://www.cultura.trentino.it/Luoghi/Tutti-i-luoghi-della-cultura/Archivi/Archivio-Diocesano-Tridentino" 
                target="_blank" rel="noopener noreferrer">
                Archivio Diocesano Tridentino
                </a>
            </p>

            <p><strong>AFS:</strong> 
                <a href="https://www.cultura.trentino.it/Luoghi/Tutti-i-luoghi-della-cultura/Archivi/Archivio-fotografico-storico-provinciale" 
                target="_blank" rel="noopener noreferrer">
                Archivio fotografico storico provinciale
                </a>
            </p>

            <p><strong>APTn:</strong> 
                <a href="https://siusa-archivi.cultura.gov.it/cgi-bin/pagina.pl?TipoPag=cons&Chiave=17208" 
                target="_blank" rel="noopener noreferrer">
                Archivio Provinciale di Trento
                </a>
            </p>

            <p><strong>ASCTn:</strong> 
                <a href="https://archiviostorico.bibcom.trento.it/" 
                target="_blank" rel="noopener noreferrer">
                Archivio storico del Comune di Trento
                </a>
            </p>

            <p><strong>ASTn:</strong> 
                <a href="https://archiviodistatotrento.cultura.gov.it/" 
                target="_blank" rel="noopener noreferrer">
                Archivio di Stato di Trento
                </a>
            </p>

            <p><strong>AVA:</strong> 
                <a href="https://www.oesta.gv.at/ueber-uns/abteilungen/allgemeines-verwaltungsarchiv-finanz-und-hofkammerarchiv.html" 
                target="_blank" rel="noopener noreferrer">
                Allgemeines Verwaltungsarchiv, Wien
                </a>
            </p>

            <p><strong>BCTn:</strong> 
                <a href="https://bibcom.trento.it/" 
                target="_blank" rel="noopener noreferrer">
                Biblioteca Comunale di Trento
                </a>
            </p>

            <p><strong>FMSTn:</strong> 
                <a href="https://museostorico.it/" 
                target="_blank" rel="noopener noreferrer">
                Fondazione Museo storico del Trentino
                </a>
            </p>

            <p><strong>MDTn:</strong> 
                <a href="https://www.museodiocesanotridentino.it/" 
                target="_blank" rel="noopener noreferrer">
                Museo Diocesano Tridentino
                </a>
            </p>

            <p><strong>TLA:</strong> 
                <a href="https://www.tirol.gv.at/kunst-kultur/landesarchiv/" 
                target="_blank" rel="noopener noreferrer">
                Tiroler Landesarchiv, Innsbruck
                </a>
            </p>

        </div>
        
        <button data-file="toponymy_maps/toponymy.html">
            <strong>Toponymy</strong><br>
            <span class="extended">From 'contrade' to 'vie': discover the evolution of toponymy throughout the 19th century.</span>
        </button>

        <div class="dropdown">
            <button class="dropdown-btn">
                <strong>Historical evolution</strong><br>
                <span class="extended">Discover how the city has evolved through the centuries.</span>
            </button>

            <div class="dropdown-content">
                <button data-file="evolution_maps/historical_slider_1.html">
                    1st century â†’ 3rd-6th centuries
                </button>
                <button data-file="evolution_maps/historical_slider_2.html">
                    3rd-6th centuries â†’ 10thâ€“11th centuries
                </button>
                <button data-file="evolution_maps/historical_slider_3.html">
                    10th-11th centuries â†’ 13th-14th centuries
                </button>
                <button data-file="evolution_maps/historical_slider_4.html">
                    13th-14th centuries â†’ 15th-16th centuries
                </button>
                <button data-file="evolution_maps/historical_slider_5.html">
                    15th-16th centuries â†’ 17th-18th centuries
                </button>
                <button data-file="evolution_maps/historical_slider_6.html">
                    17th-18th centuries â†’ first 19th century
                </button>
                <button data-file="evolution_maps/historical_slider_7.html">
                    first 19th century â†’ second 19th century
                </button>
            </div>
        </div>

    </div>

    <div class="map-container">

        <div id="loading">
            <div class="hourglass"></div>
            <div class="loading-text">Loading mapsâ€¦</div>
        </div>

        <iframe id="mapFrame" src="public_works_maps/map.html"></iframe>

        <!-- Nuovo contenitore per il testo About -->
        <div id="aboutText">
            <h1 style="color:#BAB700;">About the Project</h1>
            <p> Developed as part of my PhD research, <strong><i>The imaginary map</i></strong> is</p>
            <p> an interactive platform that explores Trentoâ€™s historical evolution.</p>
            <p> By combining archival research with geometric and thematic surveys, the project</p>
            <p> integrates historical narratives and spatial data into dynamic maps.</p>
            <p> Users can investigate the cityâ€™s history, access structured and reliable datasets,</p>
            <p> and engage with Trentoâ€™s built heritage in a new, immersive way.</p>
            <p> The platform supports anyone undertaking historical and archival research on Trento,</p>
            <p> guiding them through complex analog documentation and digital records.</p>
        </div>
    </div>

<script>
    const frame = document.getElementById("mapFrame");
    const loader = document.getElementById("loading");
    const dropdown = document.querySelector(".dropdown");
    const dropdownBtn = document.querySelector(".dropdown-btn");
    const publicLegend = document.getElementById("publicWorksLegend");
    const publicBtn = document.getElementById("publicWorksBtn");


    function loadMap(file, button) {
        loader.style.display = "flex";
        frame.src = file;

        if (file.includes("historical_slider")) {
            frame.classList.add("slider-map");
        } else {
            frame.classList.remove("slider-map");
        }

        // Mostra iframe e nasconde About
        frame.style.display = "block";
        aboutText.style.display = "none";

        // Rimuove active da tutti i bottoni
        document.querySelectorAll(".sidebar button").forEach(btn => btn.classList.remove("active"));
        button.classList.add("active");

        // ðŸ”¹ Se Ã¨ Public Works â†’ mostra legenda
        if (button.id === "publicWorksBtn") {
            publicLegend.style.display = "block";
        } else {
            publicLegend.style.display = "none";
        }

        // ðŸ”¹ Se clicco uno slider â†’ attiva anche il bottone principale
        if (button.closest(".dropdown-content")) {
            dropdownBtn.classList.add("active");
            dropdown.classList.add("open");
        } else {
            dropdown.classList.remove("open");
        }
    }

    // Bottoni normali e slider
    document.querySelectorAll(".sidebar button[data-file]").forEach(button => {
        button.addEventListener("click", function () {
            loadMap(this.dataset.file, this);
        });
    });

    // Toggle dropdown
    dropdownBtn.addEventListener("click", function () {
        dropdown.classList.toggle("open");
    });

    frame.addEventListener("load", function () {
        loader.style.display = "none";
    });

    window.addEventListener("DOMContentLoaded", function () {
        // Nasconde iframe e legenda
        frame.style.display = "none";
        publicLegend.style.display = "none";

        // Mostra About
        aboutText.style.display = "block";

        // Attiva il bottone About
        document.querySelectorAll(".sidebar button").forEach(btn => btn.classList.remove("active"));
        aboutBtn.classList.add("active");
    });


    const aboutBtn = document.getElementById("aboutBtn");
    const aboutText = document.getElementById("aboutText");

    aboutBtn.addEventListener("click", function() {
        // Nasconde iframe e legenda
        frame.style.display = "none";
        publicLegend.style.display = "none";
        
        // Mostra il testo About
        aboutText.style.display = "block";

        // Rimuove active da tutti i bottoni
        document.querySelectorAll(".sidebar button").forEach(btn => btn.classList.remove("active"));
        aboutBtn.classList.add("active");
    });


</script>


</body>
</html>
